<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
    <!-- <div id="container"></div> -->
    <script src="js/three.js"></script>
    
    <script>

      // global vars
      var container,
        scene,
        camera,
        renderer,
        earthMesh;

      init();
      animate();

      function init() {
        // scene
        scene = new THREE.Scene();

        // camera
        var screenWidth = window.innerWidth,
          screenHeight = window.innerHeight,
          viewAngle = 75,
          nearDistance = 0.1,
          farDistance = 1000;
        camera = new THREE.PerspectiveCamera(viewAngle, screenWidth / screenHeight, nearDistance, farDistance);
        scene.add(camera);
        camera.position.z = 2;

        // renderer engine
        renderer = new THREE.WebGLRenderer();
        renderer.setSize( screenWidth, screenHeight );
        // container = document.getElementById('container');
        document.body.appendChild( renderer.domElement );

        // globe
        var geometry = new THREE.SphereGeometry(0.5, 32, 32);
        var material = new THREE.MeshPhongMaterial();
        earthMesh = new THREE.Mesh(geometry, material);
        // earthMesh.position.z = -5;
        scene.add(earthMesh);

        var light = new THREE.DirectionalLight(0xffffff);
        light.position.set(1, 0, 1).normalize();
        scene.add(light);

        // load maps
        var loader = new THREE.TextureLoader();
        material.map = loader.load('img/earth-map.jpg');
        material.bumpMap = loader.load('img/earth-bump.jpg');
        material.bumpScale = 0.05;

        // var glowMesh = new THREE.GlowMesh(earthMesh);
        // earthMesh.add(glowMesh);

        var lastMove = [window.innerWidth/2, window.innerHeight/2];

        function rotateOnMouseMove(e) {
          e = e || window.event;

          const moveX = (e.clientX - lastMove[0]);
          const moveY = (e.clientY - lastMove[1]);

          earthMesh.rotation.y += ( moveX * .002 );
          earthMesh.rotation.x += ( moveY * .002 );

          lastMove[0] = e.clientX;
          lastMove[1] = e.clientY;
        }

        document.addEventListener('mousemove', rotateOnMouseMove);
      }

      function animate() {
        requestAnimationFrame(animate);

        // earthMesh.rotation.x += 0.002;
        // earthMesh.rotation.y += 0.004;

        renderer.render(scene, camera);
      }

      

    </script>
</html>